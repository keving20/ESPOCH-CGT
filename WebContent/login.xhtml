<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:f="http://java.sun.com/jsf/core"
                 template="/templates/login/loginTemple.xhtml"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"> 

    <ui:define name="title">
        <h:outputText value="Iniciar Sesión"></h:outputText>
    </ui:define>

    <ui:define name="content"> 
        <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
            <p:graphicImage name="img/ajax-loader.gif" />
        </p:dialog>
        <div id="login-page">
            <div class="container">	  	
                <h:form styleClass="form-login">
                    <h2 class="form-login-heading">Ingreso al Sistema <br/>                    
                      
                   
                          <a class="linkRegistrar" href="index.xhtml" style="font-size: 12px;color:#ffffff; ">
                            Regresar a la Página Principal  
                        </a>
                    </h2>
                    <div class="login-wrap">

                        <!-- Prepended text-->
                        <div class="form-group">
                            <div class="">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-credit-card" style="width: 11px;"></i></span>
                                    
                                    <p:inputMask id="tusuariocorreo" 
                                                 
                                                     styleClass="form-control" 
                                                     value="#{LoginBean.usuario}" 
                                                     title="Cédula" required="true" 
                                                     requiredMessage="La cédula es requerida!" 
                                                     validatorMessage="La cédula debe ser de 10 dígitos." 
                                                     mask="9999999999"/>  
                                   
                                </div>
                            </div>
                        </div>

                        <!-- Prepended text-->
                        <div class="form-group">
                            <div class="">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-lock" style="width: 11px;"></i></span>
                                    <p:password id="tusuarioclave" styleClass="form-control" value="#{LoginBean.clave}" title="Contraseña" required="true" requiredMessage="La contraseña es requerida!"/>
                                    <p:watermark for="tusuarioclave" value="Contraseña"/>
                                </div>
                            </div>
                        </div>
                        <!--
                        <label class="checkbox">
                            <span class="pull-right">
                                <a data-toggle="modal" href="login.html#myModal"> ¿Recordar contraseña?</a>		
                            </span>
                        </label>-->
                        <p:commandLink id="btnIniciar" actionListener="#{LoginBean.login()}" update=":mensajes"
                                      styleClass="btn btn-theme btn-block" >
                            <i class="fa fa-lock"></i> Iniciar Sesión
                        </p:commandLink>
                        <p:defaultCommand target="btnIniciar" />
                        <hr></hr>

                      
                        <div class="registration">
                            
                            ¿No tienes una cuenta todavía?<br/>
                            <a class="" href="new_user.xhtml">
                                Crear una cuenta
                            </a>
                            <br/>
                           
                        </div>

                    </div>                
                </h:form>

            </div>
        </div>
  
        <script type="text/javascript">
            //<![CDATA[
            function manejarLogin(xhr, status, args) {
                if (!args.validationFailed && args.estaLogeado) {
                    setTimeout(function () {
                        window.location = args.view;
                    }, 2000);
                }
            }
            //]]>
        </script>
        <script type="text/javascript">
            //<![CDATA[
            function mostrarMensaje() {
                $(document).ready(function () {
                    $('#mensaje').removeClass("hidden");
                });
            }
            //]]>
        </script>
        <script type="text/javascript">
            //<![CDATA[
            function mostrarMensajeError() {
                $(document).ready(function () {
                    $('#mensajeError').removeClass("hidden");
                });
            }
            //]]>
        </script>
        <script type="text/javascript">
            //<![CDATA[
            function mostrarMensajeUsuario() {
                $(document).ready(function () {
                    $('#mensajeErrorUser').removeClass("hidden");
                });
            }
            //]]>
        </script>
        
         <script type="text/javascript">
            //<![CDATA[
            function mostrarMensajeTiempo(t) {
                $(document).ready(function () {
                    $("#mensajeTiempo").html("<p> Usted ya tiene una solicitud pendiente para recuperar su contraseña, espere <strong>" + t + " minutos</strong> y vuelva a intentarlo.</p>");
                    $('#mensajeTiempo').removeClass("hidden");
                });
            }
            //]]>
        </script>
    
    </ui:define>
</ui:composition>